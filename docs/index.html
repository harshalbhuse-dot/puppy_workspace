<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ Geofence Radius Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Check for dark mode preference immediately to prevent flash
        if (localStorage.getItem('darkMode') === 'true' || 
            (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }
        
        // Configure Tailwind for dark mode
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        /* Walmart Colors */
        :root {
            --walmart-blue: #0053e2;
            --walmart-spark: #ffc220;
            --walmart-blue-dark: #004ac2;
        }
        
        .bg-walmart-blue { background-color: var(--walmart-blue); }
        .text-walmart-blue { color: var(--walmart-blue); }
        .bg-walmart-spark { background-color: var(--walmart-spark); }
        .text-walmart-spark { color: var(--walmart-spark); }
        .border-walmart-blue { border-color: var(--walmart-blue); }
        
        select:focus {
            outline: none;
            border-color: var(--walmart-blue);
            box-shadow: 0 0 0 3px rgba(0, 83, 226, 0.2);
        }
        
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }
        
        /* Dark mode transitions */
        html {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Toggle switch styles */
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #e5e7eb;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .toggle-switch.active {
            background: var(--walmart-spark);
        }
        
        .toggle-switch::before {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .toggle-switch.active::before {
            transform: translateX(30px);
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen transition-colors duration-300">
    <!-- Header -->
    <header class="bg-walmart-blue text-white py-6 shadow-lg">
        <div class="max-w-4xl mx-auto px-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <span class="text-4xl">ğŸ¯</span>
                    <div>
                        <h1 class="text-2xl font-bold">Geofence Radius Predictor</h1>
                        <p class="text-blue-200 text-sm">Based on 26.8M delivery records</p>
                    </div>
                </div>
                <!-- Dark Mode Toggle -->
                <div class="flex items-center gap-2">
                    <span class="text-xl" id="lightIcon">â˜€ï¸</span>
                    <button id="darkModeToggle" class="toggle-switch" aria-label="Toggle dark mode" role="switch" aria-checked="false">
                    </button>
                    <span class="text-xl" id="darkIcon">ğŸŒ™</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8">
        <!-- Input Card -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 transition-colors duration-300">
            <h2 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2">
                <span>ğŸ“</span> Input Parameters
            </h2>
            
            <form id="predictForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Property Type -->
                <div>
                    <label for="property_type" class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">
                        Property Type
                    </label>
                    <select name="property_type" id="property_type" 
                            class="w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500 transition-colors cursor-pointer">
                        <option value="HOUSE" selected>ğŸ  House</option>
                        <option value="APARTMENT">ğŸ¢ Apartment</option>
                        <option value="BUSINESS">ğŸª Business</option>
                        <option value="MOBILE_HOME">ğŸ•ï¸ Mobile Home</option>
                        <option value="DORM">ğŸ“ Dorm</option>
                        <option value="OTHER">ğŸ“ Other</option>
                    </select>
                </div>
                
                <!-- Address Source -->
                <div>
                    <label for="address_source" class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">
                        Address Source
                    </label>
                    <select name="address_source" id="address_source" 
                            class="w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500 transition-colors cursor-pointer">
                        <option value="AMS" selected>ğŸ¯ AMS (Most Accurate)</option>
                        <option value="GOOGLE">ğŸ—ºï¸ Google</option>
                        <option value="MAPBOX">ğŸ“ Mapbox</option>
                        <option value="CUSTOMER_PIN">ğŸ‘† Customer Pin (Least Accurate)</option>
                    </select>
                </div>
                
                <!-- Density Category -->
                <div>
                    <label for="density_category" class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">
                        Population Density
                    </label>
                    <select name="density_category" id="density_category" 
                            class="w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500 transition-colors cursor-pointer">
                        <option value="URBAN_HIGH">ğŸ™ï¸ Urban High (&gt;4000/kmÂ²)</option>
                        <option value="URBAN_MEDIUM">ğŸŒ† Urban Medium (1000-4000/kmÂ²)</option>
                        <option value="SUBURBAN" selected>ğŸ˜ï¸ Suburban (200-1000/kmÂ²)</option>
                        <option value="RURAL">ğŸŒ¾ Rural (&lt;200/kmÂ²)</option>
                    </select>
                </div>
                
                <!-- Percentile -->
                <div>
                    <label for="percentile" class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">
                        Percentile
                    </label>
                    <select name="percentile" id="percentile" 
                            class="w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500 transition-colors cursor-pointer">
                        <option value="P90">P90 (Tight - 90% coverage)</option>
                        <option value="P95" selected>P95 (Balanced - 95% coverage)</option>
                        <option value="P99">P99 (Safe - 99% coverage)</option>
                    </select>
                </div>
                
                <!-- Access Required -->
                <div class="md:col-span-2">
                    <label for="access_required" class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">
                        Access Required?
                    </label>
                    <select name="access_required" id="access_required" 
                            class="w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-500 transition-colors cursor-pointer">
                        <option value="NO" selected>ğŸšª No Access Required</option>
                        <option value="YES">ğŸ” Access Required (Gate/Buzzer/Code)</option>
                    </select>
                </div>
            </form>
        </div>

        <!-- Result Card -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 transition-colors duration-300">
            <h2 class="text-lg font-semibold text-gray-700 dark:text-gray-200 mb-6 flex items-center gap-2">
                <span>ğŸ“Š</span> Recommended Geofence Radius
            </h2>
            
            <div id="result" class="min-h-[200px]">
                <!-- Results will be injected here -->
            </div>
        </div>

        <!-- Info Card -->
        <div class="mt-6 bg-blue-50 dark:bg-gray-800 border border-blue-200 dark:border-gray-700 rounded-xl p-6 transition-colors duration-300">
            <h3 class="font-semibold text-walmart-blue dark:text-blue-400 mb-3 flex items-center gap-2">
                <span>ğŸ’¡</span> How It Works
            </h3>
            <ul class="text-sm text-gray-600 dark:text-gray-300 space-y-2">
                <li><strong>Property Type:</strong> Different properties have different geocoding accuracy patterns.</li>
                <li><strong>Address Source:</strong> AMS is most accurate, Customer Pin is least accurate.</li>
                <li><strong>Density:</strong> Rural areas typically need slightly larger geofences.</li>
                <li><strong>Percentile:</strong> P95 captures 95% of deliveries - a good balance of accuracy and coverage.</li>
                <li><strong>Access Required:</strong> Gated communities, buzzers, and access codes increase radius by up to 28% (especially for apartments).</li>
            </ul>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 text-gray-400 dark:text-gray-500 text-sm">
        <p>Built with â¤ï¸ by Code Puppy ğŸ¶ | Data: 26.8M delivery records</p>
    </footer>

    <script src="geofence-model.js"></script>
    <script src="app.js"></script>
</body>
</html>
